---
interface Props {
    numModulo: number;
    modulo: string;
    temario: string[];
}

import ItemAcordeon from "./ItemAcordeon.astro";
import { Icon } from "astro-icon/components";

const { numModulo, modulo, temario } = Astro.props;
---



    <div class="accordion">
        <div class="accordion-panel">
            <button id="panel1-title" class="panelTitulo accordion-trigger" aria-expanded="true">
                <h4 aria-controls="accordion1-content">Modulo {numModulo} : {modulo}</h4>
                <span class="Acordeon__Boton">
                    <Icon
                        name="ArrowIcon"
                        size={21}
                    />
                </span>
            </button>
            <div
                class="accordion-content"
                role="region"
                aria-labelledby="panel1-title"
                aria-hidden="false"
                id="panel1-content"
            >
                <div>
                    <ul class="Acordeon__lista">
                        {
                            temario.map((tema) => {
                                return (
                                    <ItemAcordeon
                                        tema={tema}
                                        colorIcono="rgb(18, 193, 2)"
                                    />
                                );
                            })
                        }
                    </ul>
                </div>
            </div>
        </div>
        <!-- <div class="accordion-panel">
            <button id="panel1-title" class="panelTitulo accordion-trigger" aria-expanded="false">
                <h4 aria-controls="accordion1-content">
                    Grid is awesome
                </h4>
                <span class="Acordeon__Boton">
                    <Icon
                        name="ArrowIcon"
                        size={21}
                    />
                </span>
            </button>
            <div
                class="accordion-content"
                role="region"
                aria-labelledby="panel1-title"
                aria-hidden="true"
                id="panel1-content"
            >
                <div>
                    <ul>
                        <li>Hola</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="accordion-panel">
            <button id="panel1-title" class="panelTitulo accordion-trigger" aria-expanded="false">
                <h4 aria-controls="accordion1-content">
                    Grid is awesome
                </h4>
                <span class="Acordeon__Boton">
                    <Icon
                        name="ArrowIcon"
                        size={21}
                    />
                </span>
            </button>
            <div
                class="accordion-content"
                role="region"
                aria-labelledby="panel1-title"
                aria-hidden="true"
                id="panel1-content"
            >
                <div>
                    <ul>
                        <li>Hola</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="accordion-panel">
            <button id="panel1-title" class="panelTitulo accordion-trigger" aria-expanded="false">
                <h4 aria-controls="accordion1-content">
                    Grid is awesome
                </h4>
                <span class="Acordeon__Boton">
                    <Icon
                        name="ArrowIcon"
                        size={21}
                    />
                </span>
            </button>
            <div
                class="accordion-content"
                role="region"
                aria-labelledby="panel1-title"
                aria-hidden="true"
                id="panel1-content"
            >
                <div>
                    <ul>
                        <li>Hola</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                    </ul>
                </div>
            </div>
        </div>
        

        <div class="accordion-panel">
            <h3 id="panel2-title">
                <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content">
                    It's full of neat tricks
                </button>
            </h3>
            <div
                class="accordion-content"
                role="region"
                aria-labelledby="panel2-title"
                aria-hidden="true"
                id="panel2-content"
            >
                <div>
                    
                    <p>
                        Doloremque adipisci ea error ad architecto tempore ullam
                        dolores voluptatibus. Perferendis debitis rem, aliquam,
                        in laborum expedita iure soluta, sed blanditiis repellat
                        eveniet minus cumque minima! Debitis numquam harum
                        consequuntur?
                    </p>
                    <p>
                        Provident, tempore sit. Eaque nam eius assumenda iste
                        rem, ipsam quisquam cumque. Nobis rerum quod, saepe
                        dolore distinctio voluptate sit excepturi iusto quaerat
                        tempora reiciendis adipisci sed perspiciatis qui
                        maiores.
                    </p>
                    <ul>
                        <li>Hola</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                    </ul>
                </div>
            </div>
        </div> -->

        <!-- <div class="accordion-panel">
            <h3 id="panel3-title">
                <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content">
                    Tell me more
                </button>
            </h3>
            <div
                class="accordion-content"
                role="region"
                aria-labelledby="panel1-title"
                aria-hidden="true"
                class="accordion-content"
                id="panel3-content"
            >
                <div>
                    <ul>
                        <li>Hola</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="accordion-panel">
            <h3 id="panel4-title">
                <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content"
                >
                    Lorem ipsum dolor sit
                </button>
            </h3>
            <div
                class="accordion-content"
                role="region"
                aria-labelledby="panel4-title"
                aria-hidden="true"
                class="accordion-content"
                id="panel4-content"
            >
                <div>
                    <ul>
                        <li>Hola</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                        <li>xdxd</li>
                        <li>gaaa</li>
                        <li>bennnnnn</li>
                    </ul>
                </div>
            </div>
        </div> -->
    </div>

<style lang="scss">
    .accordion-content {
        display: grid;
        grid-template-rows: 0fr;
        transition: grid-template-rows 250ms;
    }

    .accordion-content[aria-hidden="false"] {
        grid-template-rows: 1fr;
    }

    .accordion-content > div {
        overflow: hidden;
    }

    // .accordion {
    //     background: #343434;
    //     color: #effeef;
    //     padding: 1rem;
    // }

    .Acordeon__lista {
            padding-inline: 1rem;
            padding-bottom: 1rem;
            display: grid;
            grid-auto-rows: min-content;
            gap: 0.5rem;
        }

    .accordion-panel {
        // padding: 1rem;
        // border: 1px solid;
        // background-color: crimson;
    }

    .accordion h3 {
        position: relative;
    }
    .panelTitulo{
        // background-color: yellow;
        
    }

    .accordion-trigger {
         background: transparent;
        padding: 1rem;
        display: flex;
        align-items: start;
        justify-content: space-between;
        width: 100%;
        position: relative;
        cursor: pointer;
        color: inherit;
        font-weight: 700;
        border: none;
    }

    .accordion-trigger span svg {
         transition: transform 250ms;
    }

    .accordion-trigger::after {
        rotate: 90deg;
        translate: 0 -1.5em;
    }

    
    .accordion-trigger span svg{
        transform: rotate(180deg);
    }

    .accordion-trigger[aria-expanded="true"] span svg{
        transform: rotate(0deg);
    }
</style>

<script>
    // const accordion = document.querySelector(".accordion");
    const accordion = document.getElementById("sectionAcordeon");

    accordion.addEventListener("click", (e) => {
        const activePanel = (e.target as HTMLElement).closest(".accordion-panel");
        if (!activePanel) return;
        toggleAccordion(activePanel);
        console.log(activePanel);
    });

    function toggleAccordion(panelToActivate) {
        const activeButton = panelToActivate.querySelector("button");
        const activePanelIsOpened = activeButton.getAttribute("aria-expanded");
        console.log({activePanelIsOpened});

        if (activePanelIsOpened === "true") {
            panelToActivate.querySelector("button").setAttribute("aria-expanded", false);

            panelToActivate.querySelector(".accordion-content").setAttribute("aria-hidden", true);
        } else {
            panelToActivate.querySelector("button").setAttribute("aria-expanded", true);

            panelToActivate.querySelector(".accordion-content").setAttribute("aria-hidden", false);
        }
    }
</script>
